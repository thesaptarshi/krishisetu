<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° - ‡¶ï‡ßÉ‡¶∑‡¶ø‡¶∏‡ßá‡¶§‡ßÅ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Bengali', Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }
        
        .header {
            background: #2196F3;
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logout-btn, .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .welcome-card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .subscription-section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .subscription-status {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .subscription-expired {
            background: #ffebee;
            color: #c62828;
        }
        
        .subscription-warning {
            background: #fff3e0;
            color: #ef6c00;
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .plan-card {
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            background: white;
            transition: all 0.3s;
            position: relative;
        }
        
        .plan-card:hover {
            border-color: #2196F3;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .plan-card.popular {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #f8fff8, #e8f5e8);
        }
        
        .popular-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2196F3;
            margin: 1rem 0;
        }
        
        .plan-savings {
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .plan-features {
            list-style: none;
            margin: 1.5rem 0;
            text-align: left;
        }
        
        .plan-features li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .plan-features li:before {
            content: "‚úì ";
            color: #4CAF50;
            font-weight: bold;
        }
        
        .btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }
        
        .price-section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .price-card {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
        }
        
        .product-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .current-price {
            font-size: 2rem;
            color: #2196F3;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .update-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
        }
        
        .orders-section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .order-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .order-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-confirmed {
            background: #d4edda;
            color: #155724;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        .payment-instructions {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .payment-instructions h4 {
            margin-bottom: 0.5rem;
            color: #1976D2;
        }
        
        .payment-instructions ol {
            margin-left: 1rem;
        }
        
        .payment-instructions li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div>
            <a href="index.html" class="back-btn">‚Üê ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ</a>
            <div class="logo">üè¢ ‡¶ï‡ßÉ‡¶∑‡¶ø‡¶∏‡ßá‡¶§‡ßÅ</div>
        </div>
        <div class="user-info">
            <span id="companyName">‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø</span>
            <button class="logout-btn" onclick="logout()">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
        </div>
    </div>
    
    <div class="container">
        <div class="welcome-card">
            <h2>‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, <span id="welcomeName"></span>!</h2>
            <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        </div>
        
        <!-- Subscription Status -->
        <div class="subscription-status" id="subscriptionStatus">
            <!-- Will be populated by JavaScript -->
        </div>
        
        <!-- Subscription Plans -->
        <div class="subscription-section">
            <h3>üí≥ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®</h3>
            <div class="plans-grid">
                <div class="plan-card">
                    <h4>‡ßß ‡¶Æ‡¶æ‡¶∏ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®</h4>
                    <div class="plan-price">‡ß≥‡ßØ‡ßØ‡ßØ</div>
                    <ul class="plan-features">
                        <li>‡¶∏‡¶¨ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</li>
                        <li>‡¶Ö‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</li>
                        <li>‡ß®‡ß™/‡ß≠ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>‡¶¶‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('1month', 999)">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                
                <div class="plan-card popular">
                    <div class="popular-badge">‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º</div>
                    <h4>‡ß© ‡¶Æ‡¶æ‡¶∏ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®</h4>
                    <div class="plan-price">‡ß≥‡ß®‡ß™‡ßØ‡ßØ</div>
                    <div class="plan-savings">‡ß´‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡¶Ø‡¶º!</div>
                    <ul class="plan-features">
                        <li>‡¶∏‡¶¨ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</li>
                        <li>‡¶Ö‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</li>
                        <li>‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø‡¶ï‡ßç‡¶∏</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('3months', 2499)">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                
                <div class="plan-card">
                    <h4>‡ßß ‡¶¨‡¶õ‡¶∞ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®</h4>
                    <div class="plan-price">‡ß≥‡ßØ‡ßØ‡ßØ‡ßØ</div>
                    <div class="plan-savings">‡ß®‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡¶Ø‡¶º!</div>
                    <ul class="plan-features">
                        <li>‡¶∏‡¶¨ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</li>
                        <li>‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶õ‡¶æ‡¶°‡¶º ‡¶ì ‡¶Ö‡¶´‡¶æ‡¶∞</li>
                        <li>‡¶°‡ßá‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡ßá‡¶° ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('1year', 9999)">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>
        </div>
        
        <!-- Price Management -->
        <div class="price-section">
            <h3>üí∞ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <div class="price-grid" id="priceGrid">
                <!-- Price cards will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Orders -->
        <div class="orders-section">
            <h3>üìã ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
            <div id="ordersList">
                <!-- Orders will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePaymentModal()">&times;</span>
            <h3>üí≥ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            
            <div class="form-group">
                <label>‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®:</label>
                <input type="text" id="selectedPlan" readonly>
            </div>
            
            <div class="form-group">
                <label>‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                <input type="text" id="totalAmount" readonly>
            </div>
            
            <div class="form-group">
                <label>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø:</label>
                <select id="paymentMethod">
                    <option value="bkash">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ - 01711-123456</option>
                    <option value="nagad">‡¶®‡¶ó‡¶¶ - 01722-123456</option>
                    <option value="rocket">‡¶∞‡¶ï‡ßá‡¶ü - 01733-123456</option>
                    <option value="bank">‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ - Dutch Bangla Bank</option>
                </select>
            </div>
            
            <div class="payment-instructions">
                <h4>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</h4>
                <ol>
                    <li>‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®</li>
                    <li>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>‡¶®‡¶ø‡¶ö‡ßá ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®</li>
                    <li>‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                </ol>
            </div>
            
            <div class="form-group">
                <label>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø:</label>
                <input type="text" id="transactionId" placeholder="‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®" required>
            </div>
            
            <button class="btn" onclick="processPayment()">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <script>
        // Check if company is logged in
        const currentCompany = JSON.parse(localStorage.getItem('currentCompany'));
        if (!currentCompany) {
            window.location.href = 'company-login.html';
        }
        
        // Display company name
        document.getElementById('companyName').textContent = currentCompany.name;
        document.getElementById('welcomeName').textContent = currentCompany.name;
        
        // Load subscription status
        function loadSubscriptionStatus() {
            const now = new Date();
            const expiryDate = new Date(currentCompany.subscriptionExpiry);
            const daysLeft = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
            
            const statusDiv = document.getElementById('subscriptionStatus');
            
            if (currentCompany.subscription === 'active' && now < expiryDate) {
                statusDiv.className = 'subscription-status';
                statusDiv.innerHTML = `
                    <h3>‚úÖ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º</h3>
                    <p>‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑: ${expiryDate.toLocaleDateString()} (${daysLeft} ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø)</p>
                `;
            } else if (currentCompany.subscription === 'trial' && now < expiryDate) {
                statusDiv.className = 'subscription-status subscription-warning';
                statusDiv.innerHTML = `
                    <h3>üîÑ ‡¶ü‡ßç‡¶∞‡¶æ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶™‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶°</h3>
                    <p>‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑: ${expiryDate.toLocaleDateString()} (${daysLeft} ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø)</p>
                    <p>‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶¨‡ßç‡¶Ø‡¶æ‡¶π‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®‡•§</p>
                `;
            } else {
                statusDiv.className = 'subscription-status subscription-expired';
                statusDiv.innerHTML = `
                    <h3>‚ùå ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑</h3>
                    <p>‡¶∏‡ßá‡¶¨‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶®‡¶¨‡¶æ‡¶Ø‡¶º‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                `;
            }
        }
        
        // Select subscription plan
        function selectPlan(planType, amount) {
            const planNames = {
                '1month': '‡ßß ‡¶Æ‡¶æ‡¶∏ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®',
                '3months': '‡ß© ‡¶Æ‡¶æ‡¶∏ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®',
                '1year': '‡ßß ‡¶¨‡¶õ‡¶∞ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®'
            };
            
            document.getElementById('selectedPlan').value = planNames[planType];
            document.getElementById('totalAmount').value = '‡ß≥' + amount;
            
            // Store selected plan data
            window.selectedPlan = { type: planType, amount: amount };
            
            document.getElementById('paymentModal').style.display = 'block';
        }
        
        // Close payment modal
        function closePaymentModal() {
            document.getElementById('paymentModal').style.display = 'none';
            document.getElementById('transactionId').value = '';
        }
        
        // Process payment
        function processPayment() {
            const transactionId = document.getElementById('transactionId').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            if (!transactionId) {
                alert('‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            // Calculate new expiry date
            let monthsToAdd = 0;
            switch(window.selectedPlan.type) {
                case '1month': monthsToAdd = 1; break;
                case '3months': monthsToAdd = 3; break;
                case '1year': monthsToAdd = 12; break;
            }
            
            const newExpiryDate = new Date();
            newExpiryDate.setMonth(newExpiryDate.getMonth() + monthsToAdd);
            
            // Update company data
            currentCompany.subscription = 'active';
            currentCompany.subscriptionExpiry = newExpiryDate.toISOString();
            currentCompany.lastPayment = {
                date: new Date().toISOString(),
                amount: window.selectedPlan.amount,
                plan: window.selectedPlan.type,
                transactionId: transactionId,
                paymentMethod: paymentMethod,
                status: 'completed'
            };
            
            localStorage.setItem('currentCompany', JSON.stringify(currentCompany));
            
            // Update in companies array
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const companyIndex = companies.findIndex(c => c.id === currentCompany.id);
            if (companyIndex !== -1) {
                companies[companyIndex] = currentCompany;
                localStorage.setItem('companies', JSON.stringify(companies));
            }
            
            alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
            closePaymentModal();
            loadSubscriptionStatus();
        }
        
        // Load price cards
        function loadPriceCards() {
            const products = [
                { key: 'minikit', name: '‡¶Æ‡¶ø‡¶®‡¶ø‡¶ï‡¶ø‡¶ü' },
                { key: 'kash', name: '‡¶ï‡¶æ‡¶∂' },
                { key: 'lalsonno', name: '‡¶≤‡¶æ‡¶≤‡¶∏‡ßã‡¶®‡¶æ' }
            ];
            
            const priceGrid = document.getElementById('priceGrid');
            priceGrid.innerHTML = '';
            
            products.forEach(product => {
                const currentPrice = currentCompany.prices[product.key] || 0;
                
                const card = document.createElement('div');
                card.className = 'price-card';
                
                card.innerHTML = `
                    <div class="product-name">${product.name}</div>
                    <div class="current-price">‡ß≥${currentPrice}</div>
                    <div class="form-group">
                        <label>‡¶®‡¶§‡ßÅ‡¶® ‡¶¶‡¶æ‡¶Æ:</label>
                        <input type="number" id="price_${product.key}" value="${currentPrice}" min="0" step="0.01">
                    </div>
                    <button class="update-btn" onclick="updatePrice('${product.key}')">
                        ‡¶¶‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                `;
                
                priceGrid.appendChild(card);
            });
        }
        
        // Update price
        function updatePrice(product) {
            const newPrice = parseFloat(document.getElementById(`price_${product}`).value);
            
            if (isNaN(newPrice) || newPrice < 0) {
                alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶¶‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
                return;
            }
            
            // Update current company data
            currentCompany.prices[product] = newPrice;
            localStorage.setItem('currentCompany', JSON.stringify(currentCompany));
            
            // Update in companies array
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const companyIndex = companies.findIndex(c => c.id === currentCompany.id);
            if (companyIndex !== -1) {
                companies[companyIndex].prices[product] = newPrice;
                localStorage.setItem('companies', JSON.stringify(companies));
            }
            
            alert('‡¶¶‡¶æ‡¶Æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            loadPriceCards();
        }
        
        // Load orders
        function loadOrders() {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const companyOrders = orders.filter(order => 
                order.companyId === currentCompany.id || 
                (order.selectedCompany && order.selectedCompany.id === currentCompany.id)
            );
            
            const ordersList = document.getElementById('ordersList');
            
            if (companyOrders.length === 0) {
                ordersList.innerHTML = '<p>‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡ßá‡¶á‡•§</p>';
                return;
            }
            
            ordersList.innerHTML = '';
            
            companyOrders.reverse().forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = 'order-item';
                
                let statusClass = 'status-pending';
                let statusText = '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶£';
                
                if (order.status === 'confirmed') {
                    statusClass = 'status-confirmed';
                    statusText = '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§';
                } else if (order.status === 'company_assigned') {
                    statusClass = 'status-confirmed';
                    statusText = '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§';
                } else if (order.paymentStatus === 'completed') {
                    statusClass = 'status-completed';
                    statusText = '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®';
                    orderDiv.style.background = 'linear-gradient(135deg, #e8f5e8, #c8e6c8)';
                }
                
                // Payment button for company assigned orders
                let paymentButton = '';
                if (order.status === 'company_assigned' && order.paymentStatus !== 'completed') {
                    paymentButton = `
                        <button class="btn" onclick="makePayment(${order.id})" style="background: #4CAF50; margin-top: 1rem;">
                            üí≥ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡ß≥${order.finalTotalAmount || order.totalAmount})
                        </button>
                    `;
                }
                
                orderDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h4>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ #${order.id}</h4>
                        <span class="order-status ${statusClass}">${statusText}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div><strong>‡¶ï‡ßÉ‡¶∑‡¶ï:</strong> ${order.farmerName}</div>
                        <div><strong>‡¶´‡ßã‡¶®:</strong> ${order.farmerPhone}</div>
                        <div><strong>‡¶™‡¶£‡ßç‡¶Ø:</strong> ${order.productName}</div>
                        <div><strong>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</strong> ${order.quantity} ‡¶™‡¶ø‡¶∏</div>
                        <div><strong>‡¶¶‡¶∞:</strong> ‡ß≥${order.finalPrice || order.price}</div>
                        <div><strong>‡¶Æ‡ßã‡¶ü:</strong> ‡ß≥${order.finalTotalAmount || order.totalAmount}</div>
                        <div><strong>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${order.date} ${order.time}</div>
                        <div><strong>‡¶∏‡ßç‡¶•‡¶æ‡¶®:</strong> ${order.location}</div>
                    </div>
                    ${paymentButton}
                `;
                
                ordersList.appendChild(orderDiv);
            });
        }

        // Add payment function
        function makePayment(orderId) {
            if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                return;
            }
            
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const orderIndex = orders.findIndex(o => o.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].paymentStatus = 'completed';
                orders[orderIndex].paymentDate = new Date().toISOString();
                orders[orderIndex].paidBy = currentCompany.id;
                
                localStorage.setItem('orders', JSON.stringify(orders));
                
                alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶è‡¶ñ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§');
                loadOrders();
            }
        }
        
        // Logout function
        function logout() {
            localStorage.removeItem('currentCompany');
            window.location.href = 'index.html';
        }
        
        // Initialize page
        loadSubscriptionStatus();
        loadPriceCards();
        loadOrders();
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('paymentModal');
            if (event.target === modal) {
                closePaymentModal();
            }
        }
    </script>
</body>
</html>
